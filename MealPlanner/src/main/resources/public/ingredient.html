<!DOCTYPE html>
<html lang="en">
<head>
    <title>Ingredients</title>

    <script src="/webjars/jquery/3.1.1/jquery.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function() {
            $.ajaxSetup({
              contentType: "application/json; charset=utf-8"
            });

            var loadIngredients = function() {
                $.ajax({
                    url: "/api/ingredient"
                }).then(function(ingredients) {
                    var html = '<table>';

                    for(var i in ingredients) {
                        var ingredient = ingredients[i];

                        html += '<tr>';
                        html += '<td class="ingredient-name">' + ingredient.name + '</td>';
                        html += '<td class="ingredient-quantity">' + ingredient.quantity + '</td>';
                        html += '<td class="ingredient-unit">' + ingredient.unit + '</td>';
                        html += '</tr>';
                    }

                    $('#container').html(html);
                });
            };

            $('#add-button-ingredient').click(function(e){
                event.preventDefault();

                var ingredient = {};

                ingredient.name = $('#add-input-ingredient-name').val();
                ingredient.quantity = $('#add-input-ingredient-quantity').val();
                ingredient.unit = $('#add-input-ingredient-unit').val();

                $.post("/api/ingredient", JSON.stringify(ingredient)).done(loadIngredients);
            });

            loadIngredients();
        });
    </script>
</head>
<body>
    <h1>Ingredients</h1>
    <div id="container"></div>

    <form>
        <input id="add-input-ingredient-name"/>
        <input id="add-input-ingredient-quantity"/>
        <input id="add-input-ingredient-unit"/>

        <button id="add-button-ingredient"></button>
    </form>
</body>
